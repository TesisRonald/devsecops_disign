name: GitGuardian scan

on: [push, pull_request]

jobs:
  sonarcloud:
    name: SonarCloud
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0  # Los clones superficiales deben deshabilitarse para una mejor relevancia del an√°lisis
      - name: SonarCloud Scan
        uses: SonarSource/sonarcloud-github-action@master
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}  # Needed to get PR information, if any
          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}  
  # scan:
  #   name: gitleaks
  #   runs-on: ubuntu-latest
  #   steps:
  #     - uses: actions/checkout@v3
  #     - uses: gitleaks/gitleaks-action@v2
  #       env:
  #         GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  #         GITLEAKS_LICENSE: ${{ secrets.GITLEAKS_LICENSE}} # Only required for Organizations, not personal accounts.
  # python-lint:
  #   needs: scan
  #   runs-on: ubuntu-latest
  #   name: CI workflow
  #   steps:
  #   - name: checkout source repo
  #     uses: actions/checkout@main

  #   - name: Install dependencies
  #     run: |
  #       python -m pip install --upgrade pip
  #       pip install flake8 pytest
  #       if [ -f requirements.txt ]; then pip install -r requirements.txt; fi


  #   - name: linting
  #     uses: programmingwithalex/pylinter@main
  #     with:
  #       python-root: '.'
  #       flake8-flags: ''
  #       mypy-flags: ''
  #       fail-on-isort: false
  #       skip-flake8: false
  #       # skip-mypy: false
  #       # skip-isort: false
  #       # mypy-ignore-dirs-files: ''
  #       requirements-file: 'requirements.txt'

  #   - name: commit isort changes
  #     run: |
  #       git config --local user.email "action@github.com"
  #       git config --local user.name "GitHub Action"
  #       git add -A && git diff-index --cached --quiet HEAD || git commit -m 'isort'

  #   - name: push isort changes
  #     uses: ad-m/github-push-action@master
  #     with:
  #       github_token: ${{ secrets.GITHUB_TOKEN }}
  #       branch: ${{ github.ref }}
  #   - name: Test with pytest
  #     run: |
  #       if [ -d tests ] || [ -d test ]; then python -m pytest; fi